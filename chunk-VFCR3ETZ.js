import{$ as Xe,B as Y,C as w,E as Ke,H as M,I as O,J as P,M as Fe,N as Ee,O as A,P as R,Q as V,R as L,S as k,T as J,U as Te,_ as Qe,a as Je,ca as et,da as tt,e as Z,ea as it,fa as De,g as H,ga as Ie,h as Se,j as He,ja as S,k as b,ka as we,l as v,la as Me,m as N,ma as Oe,n as _,na as Pe,o as be,oa as Ae,p as ue,pa as Re,qa as Ve,r as F,ra as Le,s as E,sa as ke,t as Ne,ta as je,u as _e,ua as j,v as T,va as nt,w as D,wa as ot,y as I,z as We}from"./chunk-WCXY534E.js";import{Ab as l,Ea as U,Fa as $,Nb as n,Ob as r,Pb as d,Qb as fe,Rb as he,Tb as Q,Wb as z,Yb as f,ac as xe,fc as ee,gb as s,gc as c,gd as te,ha as Ze,hb as p,hc as G,hd as q,ia as Ce,ic as ze,ma as Ge,na as Ue,oc as y,pd as Ye,sd as x,ta as C,ua as ye,uc as $e,vc as qe,yb as h,zc as de}from"./chunk-VANURZIH.js";var rt=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=C({type:i,selectors:[["app-dashboard"]],standalone:!0,features:[y],decls:2,vars:0,template:function(t,a){t&1&&(n(0,"p"),c(1,"dashboard works!"),r())}});let o=i;return o})();var X=(o,i)=>{let m=Ue(H),e=Ue(S);return We.hasToken()?!0:(We.signOut(),m.navigateByUrl("/login"),e.error("ERROR","You Are Not LoggedIn. Please Login First.",{nzDuration:5e3}),!1)};var W=nt.BASIC_URL,B=(()=>{let i=class i{constructor(e,t){this.http=e,this.sharedService=t}searchCountries(e){return this.http.post(W+"api/v1/countries",e,{headers:this.sharedService.createAuthorizationHeader()})}searchCities(e){return this.http.post(W+"api/v1/cities",e,{headers:this.sharedService.createAuthorizationHeader()})}createCountry(e){return this.http.post(W+"api/v1/country",e,{headers:this.sharedService.createAuthorizationHeader()})}updateCountry(e){return this.http.put(W+"api/v1/country",e,{headers:this.sharedService.createAuthorizationHeader()})}createCompany(e){return this.http.post(W+"api/v1/company",e,{headers:this.sharedService.createAuthorizationHeader()})}createInternalCompany(e){return this.http.post(W+"api/v1/company/internal",e,{headers:this.sharedService.createAuthorizationHeader()})}searchCompanies(e){return this.http.post(W+"api/v1/company/search",e,{headers:this.sharedService.createAuthorizationHeader()})}createCity(e){return this.http.post(W+"api/v1/city",e,{headers:this.sharedService.createAuthorizationHeader()})}updateCity(e){return this.http.put(W+"api/v1/city",e,{headers:this.sharedService.createAuthorizationHeader()})}getCity(e){return this.http.get(W+`api/v1/city/${e}`,{headers:this.sharedService.createAuthorizationHeader()})}getCountry(e){return this.http.get(W+`api/v1/country/${e}`,{headers:this.sharedService.createAuthorizationHeader()})}getAllCountries(){return this.http.get(W+"api/v1/countries/all",{headers:this.sharedService.createAuthorizationHeader()})}getAllCities(e){return this.http.get(W+`api/v1/cities/all/${e}`,{headers:this.sharedService.createAuthorizationHeader()})}};i.\u0275fac=function(t){return new(t||i)(Ge(Je),Ge(ot))},i.\u0275prov=Ze({token:i,factory:i.\u0275fac,providedIn:"root"});let o=i;return o})();function Ct(o,i){if(o&1&&c(0),o&2){let m=f();ze(" Total ",m.totalElementsFromBackend," items ")}}function yt(o,i){if(o&1&&c(0),o&2){let m=f().$implicit,e=f();ze(" Total ",e.expandedData[m.id]==null?null:e.expandedData[m.id].totalItems," items ")}}function xt(o,i){if(o&1&&(fe(0),n(1,"tr")(2,"td")(3,"nz-tag",21),c(4),r()(),n(5,"td"),c(6),r(),n(7,"td"),c(8),$e(9,"date"),r(),n(10,"td")(11,"button",17),c(12,"Update"),r()()(),he()),o&2){let m=i.$implicit;s(3),l("nzColor",m.bgColor),s(),G(m.id),s(2),G(m.name),s(2),G(qe(9,6,m.createdDate)),s(3),xe("routerLink","/admin/update-city/",m.id,"")}}function St(o,i){if(o&1){let m=Q();fe(0),n(1,"tr")(2,"td",15),z("nzExpandChange",function(){let t=U(m).$implicit,a=f();return $(a.onExpandChange(t.id))}),r(),n(3,"td"),c(4),r(),n(5,"td"),c(6),r(),n(7,"td"),c(8),$e(9,"date"),r(),n(10,"td")(11,"button",16),c(12,"Create City"),r(),n(13,"button",17),c(14,"Update"),r()()(),n(15,"tr",18)(16,"div",19)(17,"nz-table",20,2),z("nzPageIndexChange",function(t){let a=U(m).$implicit,u=f();return $(u.onPageChangeOfChildTable(a.id,t))}),h(19,yt,1,1,"ng-template",null,3,de),n(21,"thead")(22,"tr")(23,"th"),c(24,"ID"),r(),n(25,"th"),c(26,"Name"),r(),n(27,"th"),c(28,"Created Date"),r(),n(29,"th"),c(30,"Actions"),r()()(),n(31,"tbody"),h(32,xt,13,8,"ng-container",14),r()()()(),he()}if(o&2){let m=i.$implicit,e=ee(20),t=f();s(2),l("nzExpand",t.expandSetOfEntries.has(m.id)),s(2),G(m.id),s(2),G(m.name),s(2),G(qe(9,15,m.createdDate)),s(3),xe("routerLink","/admin/create-city/",m.id,""),s(2),xe("routerLink","/admin/update-country/",m.id,""),s(2),l("nzExpand",t.expandSetOfEntries.has(m.id)),s(2),l("nzData",t.expandedData[m.id]==null?null:t.expandedData[m.id].data)("nzFrontPagination",!1)("nzPageSize",t.expandedData[m.id]==null?null:t.expandedData[m.id].pageSize)("nzTotal",t.expandedData[m.id]==null?null:t.expandedData[m.id].totalItems)("nzShowTotal",e),s(15),l("ngForOf",t.expandedData[m.id]==null?null:t.expandedData[m.id].data)}}var at=(()=>{let i=class i{constructor(e,t,a,u,g){this.fb=e,this.devicesService=t,this.notification=a,this.modal=u,this.message=g,this.clients=[],this.currentPage=0,this.pageSize=10,this.sizeFromBackend=10,this.totalElementsFromBackend=0,this.expandSetOfEntries=new Set,this.expandedData={}}ngOnInit(){this.validateForm=this.fb.group({name:[null]}),this.searchClients()}searchClientsByFileds(){this.currentPage=0,this.searchClients()}searchClients(){let e=this.validateForm.value;e.page=this.currentPage.toString(),e.size=this.pageSize.toString(),this.devicesService.searchCountries(e).subscribe(t=>{console.log("grouped data",t),this.clients=t.content,this.sizeFromBackend=t.size,this.currentPage=t.number+1,this.totalElementsFromBackend=t.totalElements,console.log(t)})}pageIndexChange(e){console.log(e),this.currentPage=e-1,this.searchClients()}onExpandChange(e){console.log("in",!this.expandSetOfEntries.has(e)),this.expandSetOfEntries.has(e)?this.expandSetOfEntries.delete(e):(this.expandSetOfEntries.add(e),this.expandedData[e]={data:[],currentPage:0,pageSize:this.pageSize,totalItems:0},this.fetchNestedTableEntries(e))}fetchNestedTableEntries(e){let t={page:this.expandedData[e].currentPage.toString(),size:this.expandedData[e].pageSize.toString(),countryId:e};console.log("in",e),this.devicesService.searchCities(t).subscribe(a=>{console.log("in",a),this.expandedData[e].data=a.content,this.expandedData[e].totalItems=a.totalElements,this.expandedData[e].pageSize=a.size},a=>{console.error("Error fetching additional data:",a)})}onPageChangeOfChildTable(e,t){this.expandedData[e].currentPage=t-1,this.fetchNestedTableEntries(e)}};i.\u0275fac=function(t){return new(t||i)(p(D),p(B),p(S),p(Ie),p(De))},i.\u0275cmp=C({type:i,selectors:[["app-view-locations"]],standalone:!0,features:[y],decls:31,vars:10,consts:[["filterTable",""],["customTotal",""],["basicTable",""],["customTotalExpend",""],[1,"sh"],[1,"table-operations"],["nz-form","",2,"float","right","margin-bottom","15px",3,"nzLayout","formGroup"],["formControlName","name","nz-input","","placeholder","Country Name"],["nz-button","","nzType","primary",3,"click","disabled"],["nz-button","","routerLink","/admin/create-country"],["nzTableLayout","fixed",3,"nzPageIndexChange","nzData","nzFrontPagination","nzPageSize","nzTotal","nzShowTotal","nzPageIndex"],["nzWidth","80px"],["nzWidth","150px"],["nzWidth","300px"],[4,"ngFor","ngForOf"],[3,"nzExpandChange","nzExpand"],["nz-button","","nzType","primary",3,"routerLink"],["nz-button","","nzType","primary",2,"margin-left","2px",3,"routerLink"],[3,"nzExpand"],[2,"padding","20px"],["nzTableLayout","fixed","nzSize","small",3,"nzPageIndexChange","nzData","nzFrontPagination","nzPageSize","nzTotal","nzShowTotal"],[3,"nzColor"]],template:function(t,a){if(t&1){let u=Q();n(0,"div",4)(1,"div",5)(2,"form",6)(3,"nz-form-item")(4,"nz-form-control"),d(5,"input",7),r()(),n(6,"nz-form-item")(7,"nz-form-control")(8,"button",8),z("click",function(){return U(u),$(a.searchClientsByFileds())}),c(9,"Search"),r()()()()(),n(10,"div",5)(11,"div")(12,"button",9),c(13,"Create New Country"),r()()(),n(14,"nz-table",10,0),z("nzPageIndexChange",function(Be){return U(u),$(a.pageIndexChange(Be))}),h(16,Ct,1,1,"ng-template",null,1,de),n(18,"thead")(19,"tr"),d(20,"th",11),n(21,"th",12),c(22,"ID"),r(),n(23,"th"),c(24,"Country Name"),r(),n(25,"th"),c(26,"Created Date"),r(),n(27,"th",13),c(28,"Actions"),r()()(),n(29,"tbody"),h(30,St,33,17,"ng-container",14),r()()()}if(t&2){let u=ee(15),g=ee(17);s(2),l("nzLayout","inline")("formGroup",a.validateForm),s(6),l("disabled",!a.validateForm.valid),s(6),l("nzData",a.clients)("nzFrontPagination",!1)("nzPageSize",a.sizeFromBackend)("nzTotal",a.totalElementsFromBackend)("nzShowTotal",g)("nzPageIndex",a.currentPage),s(16),l("ngForOf",u.data)}},dependencies:[j,P,M,O,R,A,L,V,k,w,Re,we,Oe,Me,Le,Ae,Ve,ke,Pe,je,x,te,Ye,Se,I,F,b,N,_,E,T],styles:[".sh[_ngcontent-%COMP%]{box-shadow:#0000003d 0 3px 8px;background:#fff;padding:20px;border-radius:5px}"]});let o=i;return o})();function bt(o,i){if(o&1&&d(0,"nz-alert",11),o&2){let m=f();l("nzMessage",m.alertMessage)}}var mt=(()=>{let i=class i{constructor(e,t,a,u,g){this.fb=e,this.devicesService=t,this.notification=a,this.router=u,this.activatedRoute=g,this.alertMessage=null}ngOnInit(){this.deviceForm=this.fb.group({name:[null,[v.required]]}),this.id=this.activatedRoute.snapshot.params.id}submitForm(){if(console.log(this.deviceForm.valid),this.deviceForm.valid){let e=this.deviceForm.value;this.devicesService.createCountry(e).subscribe(t=>{this.notification.success("SUCCESS","Country Created Successfully.",{nzDuration:5e3}),this.router.navigateByUrl("/admin/view-locations")},t=>{this.notification.error("ERROR",`${t.error}`,{nzDuration:5e3})})}else for(let e in this.deviceForm.controls)this.deviceForm.controls[e].markAsDirty(),this.deviceForm.controls[e].updateValueAndValidity()}};i.\u0275fac=function(t){return new(t||i)(p(D),p(B),p(S),p(H),p(Z))},i.\u0275cmp=C({type:i,selectors:[["app-create-country"]],standalone:!0,features:[y],decls:14,vars:4,consts:[[1,"bg"],[1,"parent"],[1,"child"],[2,"padding","10px"],["nzType","success",3,"nzMessage",4,"ngIf"],["nz-form","",1,"login-form",3,"ngSubmit","formGroup"],[3,"nzNoColon"],["nzErrorTip","This input is required!"],["type","text","nz-input","","formControlName","name","placeholder","Name"],[2,"padding-bottom","30px"],["nz-button","",1,"login-form-button","login-form-margin",3,"nzType"],["nzType","success",3,"nzMessage"]],template:function(t,a){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),h(4,bt,1,1,"nz-alert",4),r(),n(5,"form",5),z("ngSubmit",function(){return a.submitForm()}),n(6,"nz-form-label",6),c(7,"Country Name"),r(),n(8,"nz-form-item")(9,"nz-form-control",7),d(10,"input",8),r()(),n(11,"div",9)(12,"button",10),c(13,"Submit"),r()()()()()()),t&2&&(s(4),l("ngIf",a.alertMessage),s(),l("formGroup",a.deviceForm),s(),l("nzNoColon","true"),s(6),l("nzType","primary"))},dependencies:[j,Y,P,M,O,R,A,L,V,J,k,w,x,q,I,F,b,N,_,E,T],styles:[".child[_ngcontent-%COMP%]{padding:50px;width:60%;margin:auto;background-color:#fff;box-shadow:1px 1px 15px -7px #0000001a;border-radius:5px}nz-form-control[_ngcontent-%COMP%]{min-width:280px}.login-form-button[_ngcontent-%COMP%]{width:30%;float:right;margin-top:20px;margin-bottom:20px}button[_ngcontent-%COMP%]{background-color:#001529;border:none}nz-divider[_ngcontent-%COMP%]{padding-bottom:10px}.preview[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}"]});let o=i;return o})();function Nt(o,i){if(o&1&&d(0,"nz-alert",11),o&2){let m=f();l("nzMessage",m.alertMessage)}}var st=(()=>{let i=class i{constructor(e,t,a,u,g){this.fb=e,this.devicesService=t,this.notification=a,this.router=u,this.activatedRoute=g,this.alertMessage=null}ngOnInit(){this.deviceForm=this.fb.group({name:[null,[v.required]]}),this.id=this.activatedRoute.snapshot.params.id}submitForm(){if(console.log(this.deviceForm.valid),this.deviceForm.valid){let e=this.deviceForm.value;e.countryId=this.id,this.devicesService.createCity(e).subscribe(t=>{this.notification.success("SUCCESS","City Created Successfully.",{nzDuration:5e3}),this.router.navigateByUrl("/admin/view-locations")},t=>{this.notification.error("ERROR",`${t.error}`,{nzDuration:5e3})})}else for(let e in this.deviceForm.controls)this.deviceForm.controls[e].markAsDirty(),this.deviceForm.controls[e].updateValueAndValidity()}};i.\u0275fac=function(t){return new(t||i)(p(D),p(B),p(S),p(H),p(Z))},i.\u0275cmp=C({type:i,selectors:[["app-create-city"]],standalone:!0,features:[y],decls:14,vars:4,consts:[[1,"bg"],[1,"parent"],[1,"child"],[2,"padding","10px"],["nzType","success",3,"nzMessage",4,"ngIf"],["nz-form","",1,"login-form",3,"ngSubmit","formGroup"],[3,"nzNoColon"],["nzErrorTip","This input is required!"],["type","text","nz-input","","formControlName","name","placeholder","Name"],[2,"padding-bottom","30px"],["nz-button","",1,"login-form-button","login-form-margin",3,"nzType"],["nzType","success",3,"nzMessage"]],template:function(t,a){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),h(4,Nt,1,1,"nz-alert",4),r(),n(5,"form",5),z("ngSubmit",function(){return a.submitForm()}),n(6,"nz-form-label",6),c(7,"City Name"),r(),n(8,"nz-form-item")(9,"nz-form-control",7),d(10,"input",8),r()(),n(11,"div",9)(12,"button",10),c(13,"Submit"),r()()()()()()),t&2&&(s(4),l("ngIf",a.alertMessage),s(),l("formGroup",a.deviceForm),s(),l("nzNoColon","true"),s(6),l("nzType","primary"))},dependencies:[j,Y,P,M,O,R,A,L,V,J,k,w,x,q,I,F,b,N,_,E,T],styles:[".child[_ngcontent-%COMP%]{padding:50px;width:60%;margin:auto;background-color:#fff;box-shadow:1px 1px 15px -7px #0000001a;border-radius:5px}nz-form-control[_ngcontent-%COMP%]{min-width:280px}.login-form-button[_ngcontent-%COMP%]{width:30%;float:right;margin-top:20px;margin-bottom:20px}button[_ngcontent-%COMP%]{background-color:#001529;border:none}nz-divider[_ngcontent-%COMP%]{padding-bottom:10px}.preview[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}"]});let o=i;return o})();function Et(o,i){if(o&1&&d(0,"nz-alert",20),o&2){let m=f();l("nzMessage",m.alertMessage)}}function Tt(o,i){if(o&1&&d(0,"nz-option",31),o&2){let m=i.$implicit;l("nzValue",m.id)("nzLabel",m.name)}}function Dt(o,i){if(o&1&&d(0,"nz-option",31),o&2){let m=i.$implicit;l("nzValue",m.id)("nzLabel",m.name)}}function It(o,i){if(o&1){let m=Q();n(0,"div",21)(1,"div",22)(2,"div",23)(3,"div",24)(4,"nz-form-item")(5,"nz-form-control",25)(6,"nz-select",26),z("ngModelChange",function(t){let a=U(m).index,u=f();return $(u.onCountryChange(t,a))}),h(7,Tt,1,2,"nz-option",27),r()()()(),n(8,"div",24)(9,"nz-form-item")(10,"nz-form-control",25)(11,"nz-select",28),h(12,Dt,1,2,"nz-option",27),r()()()(),n(13,"div",29)(14,"button",30),z("click",function(){let t=U(m).index,a=f();return $(a.removeLocation(t))}),c(15,"Remove"),r()()()()()}if(o&2){let m=i.index,e=f();l("formGroupName",m),s(7),l("ngForOf",e.allCountries),s(5),l("ngForOf",e.citiesByCountry[m])}}var lt=(()=>{let i=class i{constructor(e,t,a,u,g){this.fb=e,this.devicesService=t,this.notification=a,this.router=u,this.activatedRoute=g,this.alertMessage=null,this.allCountries=[],this.citiesByCountry={}}ngOnInit(){this.companyForm=this.fb.group({name:[null,[v.required]],price:[null,[v.required]],phone:[null,null],websiteUrl:[null,null],telegram:[null,null],tags:[[],[v.required]],locations:this.fb.array([this.createLocationFormGroup()])}),this.id=this.activatedRoute.snapshot.params.id,this.getAllCOuntries()}getAllCOuntries(){this.devicesService.getAllCountries().subscribe(e=>{this.allCountries=e})}onCountryChange(e,t){e&&this.devicesService.getAllCities(e).subscribe(a=>{this.citiesByCountry[t]=a})}createLocationFormGroup(){return new be({countryId:new ue("",v.required),cityIds:new ue([],v.required)})}addLocationFormGroup(){this.companyForm.get("locations").push(this.createLocationFormGroup())}removeLocation(e){let t=this.companyForm.get("locations");t.length>1?t.removeAt(e):t.reset()}submitForm(){if(console.log(this.companyForm.valid),this.companyForm.valid){let e=this.companyForm.value;this.devicesService.createCompany(e).subscribe(t=>{this.notification.success("SUCCESS","Company Created Successfully.",{nzDuration:5e3}),this.router.navigateByUrl("/admin/view-companies")},t=>{this.notification.error("ERROR",`${t.error}`,{nzDuration:5e3})})}else for(let e in this.companyForm.controls)this.companyForm.controls[e].markAsDirty(),this.companyForm.controls[e].updateValueAndValidity()}};i.\u0275fac=function(t){return new(t||i)(p(D),p(B),p(S),p(H),p(Z))},i.\u0275cmp=C({type:i,selectors:[["app-create-company"]],standalone:!0,features:[y],decls:44,vars:12,consts:[[1,"bg"],[1,"parent"],[1,"child"],[2,"padding","10px"],["nzType","success",3,"nzMessage",4,"ngIf"],["nz-form","",1,"login-form",3,"ngSubmit","formGroup"],[3,"nzNoColon"],["nzErrorTip","This input is required!"],["type","text","nz-input","","formControlName","name","placeholder","Name"],["type","text","nz-input","","formControlName","websiteUrl","placeholder","Website Url"],["type","text","nz-input","","formControlName","telegram","placeholder","Telegram Username"],["type","text","nz-input","","formControlName","phone","placeholder","Whatsapp Phone"],["formControlName","price","nzPlaceHolder","Price",2,"width","100%",3,"nzMin","nzStep"],["nzMode","tags","nzPlaceHolder","Add tags","formControlName","tags","nzAllowClear",""],[2,"margin-top","20px"],["formArrayName","locations"],["class","row",3,"formGroupName",4,"ngFor","ngForOf"],["nz-button","","nzType","primary",1,"remove",2,"margin-top","0px",3,"click"],[2,"padding-bottom","30px"],["nz-button","","type","submit",1,"login-form-button","login-form-margin",3,"nzType"],["nzType","success",3,"nzMessage"],[1,"row",3,"formGroupName"],[1,"madDiv"],["nz-row","",1,"med"],["nz-col","","nzSpan","10",1,"col"],["nzHasFeedback","","nzErrorTip","This Field Is Required"],["formControlName","countryId","nzPlaceHolder","Country","nzAllowClear","",3,"ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["formControlName","cityIds","nzMode","multiple","nzPlaceHolder","Cities","nzAllowClear",""],["nz-col","","nzSpan","4",1,"col"],["nz-button","","nzType","primary",1,"remove",3,"click"],[3,"nzValue","nzLabel"]],template:function(t,a){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),h(4,Et,1,1,"nz-alert",4),r(),n(5,"form",5),z("ngSubmit",function(){return a.submitForm()}),n(6,"nz-form-label",6),c(7,"Country Name"),r(),n(8,"nz-form-item")(9,"nz-form-control",7),d(10,"input",8),r()(),n(11,"nz-form-label",6),c(12,"Company Website"),r(),n(13,"nz-form-item")(14,"nz-form-control",7),d(15,"input",9),r()(),n(16,"nz-form-label",6),c(17,"Telegram Username"),r(),n(18,"nz-form-item")(19,"nz-form-control",7),d(20,"input",10),r()(),n(21,"nz-form-label",6),c(22,"Company Phone"),r(),n(23,"nz-form-item")(24,"nz-form-control",7),d(25,"input",11),r()(),n(26,"nz-form-label",6),c(27,"Company Price"),r(),n(28,"nz-form-item")(29,"nz-form-control",7),d(30,"nz-input-number",12),r()(),n(31,"nz-form-label",6),c(32,"Company Tags"),r(),n(33,"nz-form-item")(34,"nz-form-control",7),d(35,"nz-select",13),r()(),n(36,"div",14)(37,"div",15),h(38,It,16,3,"div",16),n(39,"button",17),z("click",function(){return a.addLocationFormGroup()}),c(40,"Add Location"),r()()(),n(41,"div",18)(42,"button",19),c(43,"Submit"),r()()()()()()),t&2&&(s(4),l("ngIf",a.alertMessage),s(),l("formGroup",a.companyForm),s(),l("nzNoColon","true"),s(5),l("nzNoColon","true"),s(5),l("nzNoColon","true"),s(5),l("nzNoColon","true"),s(5),l("nzNoColon","true"),s(4),l("nzMin",1)("nzStep",1),s(),l("nzNoColon","true"),s(7),l("ngForOf",a.companyForm.get("locations").controls),s(4),l("nzType","primary"))},dependencies:[j,Y,P,M,O,R,A,L,V,J,k,w,Te,Fe,Ee,x,te,q,I,F,b,N,_,E,T,Ne,_e],styles:[".child[_ngcontent-%COMP%]{padding:50px;width:80%;margin:auto;background-color:#fff;box-shadow:1px 1px 15px -7px #5551511a;border-radius:5px}nz-form-control[_ngcontent-%COMP%]{min-width:280px}.med[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding-right:5px}.login-form-button[_ngcontent-%COMP%]{width:30%;float:right;margin-top:20px;margin-bottom:20px}button[_ngcontent-%COMP%]{background-color:#001529;border:none}nz-divider[_ngcontent-%COMP%]{padding-bottom:10px}.preview[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}"]});let o=i;return o})();function wt(o,i){if(o&1&&c(0),o&2){let m=f();ze(" Total ",m.totalElementsFromBackend," items ")}}function Mt(o,i){if(o&1&&(n(0,"nz-tag",22),c(1),r()),o&2){let m=i.$implicit;l("nzColor","#2db7f5"),s(),G(m)}}function Ot(o,i){if(o&1&&d(0,"nz-avatar",25),o&2){let m=f().$implicit,e=f(2);l("nzText",e.getAvatarText(m.countryName))}}function Pt(o,i){if(o&1&&(n(0,"nz-list-item")(1,"nz-list-item-meta",23),h(2,Ot,1,1,"ng-template",null,2,de),n(4,"nz-list-item-meta-title")(5,"a",24),c(6),r()()()()),o&2){let m=i.$implicit,e=ee(3),t=f(2);s(),l("nzAvatar",e)("nzDescription",t.getCityNames(m.cityDTOList)),s(5),G(m.countryName)}}function At(o,i){o&1&&d(0,"nz-list-empty")}function Rt(o,i){if(o&1){let m=Q();fe(0),n(1,"tr")(2,"td",15),z("nzExpandChange",function(){let t=U(m).$implicit,a=f();return $(a.onExpandChange(t.id))}),r(),n(3,"td"),c(4),r(),n(5,"td"),c(6),r(),n(7,"td"),c(8),r(),n(9,"td"),c(10),r(),n(11,"td"),c(12),r(),d(13,"td"),r(),n(14,"tr",16)(15,"div",17)(16,"div",18),h(17,Mt,2,2,"nz-tag",19),r(),n(18,"nz-list",20),h(19,Pt,7,3,"nz-list-item",14)(20,At,1,0,"nz-list-empty",21),r()()(),he()}if(o&2){let m=i.$implicit,e=f();s(2),l("nzExpand",e.expandSetOfEntries.has(m.id)),s(2),G(m.name),s(2),G(m.type),s(2),G(m.price),s(2),G(m.phone),s(2),G(m.websiteUrl),s(2),l("nzExpand",e.expandSetOfEntries.has(m.id)),s(3),l("ngForOf",m.tags),s(2),l("ngForOf",m.locations),s(),l("ngIf",m.length===0)}}var ct=(()=>{let i=class i{constructor(e,t,a,u,g){this.fb=e,this.devicesService=t,this.notification=a,this.modal=u,this.message=g,this.clients=[],this.currentPage=0,this.pageSize=10,this.sizeFromBackend=10,this.totalElementsFromBackend=0,this.expandSetOfEntries=new Set,this.expandedData={}}ngOnInit(){this.validateForm=this.fb.group({name:[null]}),this.searchClients()}searchClientsByFileds(){this.currentPage=0,this.searchClients()}searchClients(){let e=this.validateForm.value;e.page=this.currentPage.toString(),e.size=this.pageSize.toString(),this.devicesService.searchCompanies(e).subscribe(t=>{console.log("grouped data",t),this.clients=t.content,this.sizeFromBackend=t.size,this.currentPage=t.number+1,this.totalElementsFromBackend=t.totalElements,console.log(t)})}pageIndexChange(e){console.log(e),this.currentPage=e-1,this.searchClients()}onExpandChange(e){console.log("in",!this.expandSetOfEntries.has(e)),this.expandSetOfEntries.has(e)?this.expandSetOfEntries.delete(e):(this.expandSetOfEntries.add(e),this.expandedData[e]={data:[],currentPage:0,pageSize:this.pageSize,totalItems:0})}fetchNestedTableEntries(e){let t={page:this.expandedData[e].currentPage.toString(),size:this.expandedData[e].pageSize.toString(),countryId:e};console.log("in",e),this.devicesService.searchCities(t).subscribe(a=>{console.log("in",a),this.expandedData[e].data=a.content,this.expandedData[e].totalItems=a.totalElements,this.expandedData[e].pageSize=a.size},a=>{console.error("Error fetching additional data:",a)})}onPageChangeOfChildTable(e,t){this.expandedData[e].currentPage=t-1,this.fetchNestedTableEntries(e)}getCityNames(e){return e.map(t=>t.name).join(", ")}getAvatarText(e){return e.charAt(0).toUpperCase()}};i.\u0275fac=function(t){return new(t||i)(p(D),p(B),p(S),p(Ie),p(De))},i.\u0275cmp=C({type:i,selectors:[["app-view-companies"]],standalone:!0,features:[y],decls:37,vars:10,consts:[["filterTable",""],["customTotal",""],["customAvatarTemplate",""],[1,"sh"],[1,"table-operations"],["nz-form","",2,"float","right","margin-bottom","15px",3,"nzLayout","formGroup"],["formControlName","name","nz-input","","placeholder","Country Name"],["nz-button","","nzType","primary",3,"click","disabled"],["nz-button","","routerLink","/admin/create-company"],["nz-button","","routerLink","/admin/create-internal-company",2,"margin-left","5px"],["nzTableLayout","fixed",3,"nzPageIndexChange","nzData","nzFrontPagination","nzPageSize","nzTotal","nzShowTotal","nzPageIndex"],["nzWidth","80px"],["nzWidth","150px"],["nzWidth","300px"],[4,"ngFor","ngForOf"],[3,"nzExpandChange","nzExpand"],[3,"nzExpand"],[2,"padding","20px","margin","auto"],[2,"margin-bottom","10px"],[3,"nzColor",4,"ngFor","ngForOf"],["nzItemLayout","horizontal"],[4,"ngIf"],[3,"nzColor"],[3,"nzAvatar","nzDescription"],["href","https://ng.ant.design"],[1,"custome-avatar",3,"nzText"]],template:function(t,a){if(t&1){let u=Q();n(0,"div",3)(1,"div",4)(2,"form",5)(3,"nz-form-item")(4,"nz-form-control"),d(5,"input",6),r()(),n(6,"nz-form-item")(7,"nz-form-control")(8,"button",7),z("click",function(){return U(u),$(a.searchClientsByFileds())}),c(9,"Search"),r()()()()(),n(10,"div",4)(11,"div")(12,"button",8),c(13,"Create New External Company"),r(),n(14,"button",9),c(15,"Create New Internal Company"),r()()(),n(16,"nz-table",10,0),z("nzPageIndexChange",function(Be){return U(u),$(a.pageIndexChange(Be))}),h(18,wt,1,1,"ng-template",null,1,de),n(20,"thead")(21,"tr"),d(22,"th",11),n(23,"th",12),c(24,"Name"),r(),n(25,"th"),c(26,"Type"),r(),n(27,"th"),c(28,"Price"),r(),n(29,"th"),c(30,"Phone"),r(),n(31,"th"),c(32,"Website"),r(),n(33,"th",13),c(34,"Actions"),r()()(),n(35,"tbody"),h(36,Rt,21,10,"ng-container",14),r()()()}if(t&2){let u=ee(17),g=ee(19);s(2),l("nzLayout","inline")("formGroup",a.validateForm),s(6),l("disabled",!a.validateForm.valid),s(8),l("nzData",a.clients)("nzFrontPagination",!1)("nzPageSize",a.sizeFromBackend)("nzTotal",a.totalElementsFromBackend)("nzShowTotal",g)("nzPageIndex",a.currentPage),s(20),l("ngForOf",u.data)}},dependencies:[j,Ke,P,M,O,R,A,L,V,k,w,tt,et,it,Xe,Qe,Re,we,Oe,Me,Le,Ae,Ve,ke,Pe,je,x,te,q,Se,I,F,b,N,_,E,T],styles:[".sh[_ngcontent-%COMP%]{box-shadow:#0000003d 0 3px 8px;background:#fff;padding:20px;border-radius:5px}  .ant-avatar-string{position:relative;left:auto;transform-origin:center}  .ant-list-item-meta-content{margin-top:-5px}"]});let o=i;return o})();function Vt(o,i){if(o&1&&d(0,"nz-alert",19),o&2){let m=f();l("nzMessage",m.alertMessage)}}function Lt(o,i){if(o&1&&d(0,"nz-option",28),o&2){let m=i.$implicit;l("nzValue",m.id)("nzLabel",m.name)}}function kt(o,i){if(o&1&&d(0,"nz-option",28),o&2){let m=i.$implicit;l("nzValue",m.id)("nzLabel",m.name)}}function jt(o,i){if(o&1){let m=Q();n(0,"div",20)(1,"div",21)(2,"div",22)(3,"div",23)(4,"nz-form-item")(5,"nz-form-control",24)(6,"nz-select",25),z("ngModelChange",function(t){let a=U(m).index,u=f();return $(u.onCountryChange(t,a))}),h(7,Lt,1,2,"nz-option",26),r()()()(),n(8,"div",23)(9,"nz-form-item")(10,"nz-form-control",24)(11,"nz-select",27),h(12,kt,1,2,"nz-option",26),r()()()()()()()}if(o&2){let m=i.index,e=f();l("formGroupName",m),s(7),l("ngForOf",e.allCountries),s(5),l("ngForOf",e.citiesByCountry[m])}}var pt=(()=>{let i=class i{constructor(e,t,a,u,g){this.fb=e,this.devicesService=t,this.notification=a,this.router=u,this.activatedRoute=g,this.alertMessage=null,this.allCountries=[],this.citiesByCountry={}}ngOnInit(){this.companyForm=this.fb.group({name:[null,[v.required]],price:[null,[v.required]],phone:[null,null],websiteUrl:[null,null],telegram:[null,null],tags:[[],[v.required]],locations:this.fb.array([this.createLocationFormGroup()])}),this.id=this.activatedRoute.snapshot.params.id,this.getAllCOuntries()}getAllCOuntries(){this.devicesService.getAllCountries().subscribe(e=>{this.allCountries=e})}onCountryChange(e,t){e&&this.devicesService.getAllCities(e).subscribe(a=>{this.citiesByCountry[t]=a})}createLocationFormGroup(){return new be({countryId:new ue(null,v.required),cityId:new ue(null,v.required)})}addLocationFormGroup(){this.companyForm.get("locations").push(this.createLocationFormGroup())}submitForm(){if(console.log(this.companyForm.valid),this.companyForm.valid){let e=this.companyForm.value;this.devicesService.createInternalCompany(e).subscribe(t=>{this.notification.success("SUCCESS","Internal Company Created Successfully.",{nzDuration:5e3}),this.router.navigateByUrl("/admin/view-companies")},t=>{this.notification.error("ERROR",`${t.error}`,{nzDuration:5e3})})}else for(let e in this.companyForm.controls)this.companyForm.controls[e].markAsDirty(),this.companyForm.controls[e].updateValueAndValidity()}};i.\u0275fac=function(t){return new(t||i)(p(D),p(B),p(S),p(H),p(Z))},i.\u0275cmp=C({type:i,selectors:[["app-create-internal-company"]],standalone:!0,features:[y],decls:42,vars:12,consts:[[1,"bg"],[1,"parent"],[1,"child"],[2,"padding","10px"],["nzType","success",3,"nzMessage",4,"ngIf"],["nz-form","",1,"login-form",3,"ngSubmit","formGroup"],[3,"nzNoColon"],["nzErrorTip","This input is required!"],["type","text","nz-input","","formControlName","name","placeholder","Name"],["type","text","nz-input","","formControlName","websiteUrl","placeholder","Website Url"],["type","text","nz-input","","formControlName","telegram","placeholder","Telegram Username"],["type","text","nz-input","","formControlName","phone","placeholder","Whatsapp Phone"],["formControlName","price","nzPlaceHolder","Price",2,"width","100%",3,"nzMin","nzStep"],["nzMode","tags","nzPlaceHolder","Add tags","formControlName","tags","nzAllowClear",""],[2,"margin-top","20px"],["formArrayName","locations"],["class","row",3,"formGroupName",4,"ngFor","ngForOf"],[2,"padding-bottom","30px"],["nz-button","","type","submit",1,"login-form-button","login-form-margin",3,"nzType"],["nzType","success",3,"nzMessage"],[1,"row",3,"formGroupName"],[1,"madDiv"],["nz-row","",1,"med"],["nz-col","","nzSpan","12",1,"col"],["nzHasFeedback","","nzErrorTip","This Field Is Required"],["formControlName","countryId","nzPlaceHolder","Country","nzAllowClear","",3,"ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["formControlName","cityId","nzPlaceHolder","City","nzAllowClear",""],[3,"nzValue","nzLabel"]],template:function(t,a){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),h(4,Vt,1,1,"nz-alert",4),r(),n(5,"form",5),z("ngSubmit",function(){return a.submitForm()}),n(6,"nz-form-label",6),c(7,"Country Name"),r(),n(8,"nz-form-item")(9,"nz-form-control",7),d(10,"input",8),r()(),n(11,"nz-form-label",6),c(12,"Company Website"),r(),n(13,"nz-form-item")(14,"nz-form-control",7),d(15,"input",9),r()(),n(16,"nz-form-label",6),c(17,"Telegram Username"),r(),n(18,"nz-form-item")(19,"nz-form-control",7),d(20,"input",10),r()(),n(21,"nz-form-label",6),c(22,"Company Phone"),r(),n(23,"nz-form-item")(24,"nz-form-control",7),d(25,"input",11),r()(),n(26,"nz-form-label",6),c(27,"Company Price"),r(),n(28,"nz-form-item")(29,"nz-form-control",7),d(30,"nz-input-number",12),r()(),n(31,"nz-form-label",6),c(32,"Company Tags"),r(),n(33,"nz-form-item")(34,"nz-form-control",7),d(35,"nz-select",13),r()(),n(36,"div",14)(37,"div",15),h(38,jt,13,3,"div",16),r()(),n(39,"div",17)(40,"button",18),c(41,"Submit"),r()()()()()()),t&2&&(s(4),l("ngIf",a.alertMessage),s(),l("formGroup",a.companyForm),s(),l("nzNoColon","true"),s(5),l("nzNoColon","true"),s(5),l("nzNoColon","true"),s(5),l("nzNoColon","true"),s(5),l("nzNoColon","true"),s(4),l("nzMin",1)("nzStep",1),s(),l("nzNoColon","true"),s(7),l("ngForOf",a.companyForm.get("locations").controls),s(2),l("nzType","primary"))},dependencies:[j,Y,P,M,O,R,A,L,V,J,k,w,Te,Fe,Ee,x,te,q,I,F,b,N,_,E,T,Ne,_e],styles:[".child[_ngcontent-%COMP%]{padding:50px;width:80%;margin:auto;background-color:#fff;box-shadow:1px 1px 15px -7px #5551511a;border-radius:5px}nz-form-control[_ngcontent-%COMP%]{min-width:280px}.med[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding-right:5px}.login-form-button[_ngcontent-%COMP%]{width:30%;float:right;margin-top:20px;margin-bottom:20px}button[_ngcontent-%COMP%]{background-color:#001529;border:none}nz-divider[_ngcontent-%COMP%]{padding-bottom:10px}.preview[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}"]});let o=i;return o})();function Bt(o,i){if(o&1&&d(0,"nz-alert",11),o&2){let m=f();l("nzMessage",m.alertMessage)}}var dt=(()=>{let i=class i{constructor(e,t,a,u,g){this.fb=e,this.adminService=t,this.notification=a,this.router=u,this.activatedRoute=g,this.alertMessage=null}ngOnInit(){this.deviceForm=this.fb.group({name:[null,[v.required]]}),this.id=this.activatedRoute.snapshot.params.id,this.getCountryById()}getCountryById(){this.adminService.getCountry(this.id).subscribe(e=>{this.deviceForm.patchValue(e)},e=>{this.notification.error("ERROR",`${e.error}`,{nzDuration:5e3})})}submitForm(){if(console.log(this.deviceForm.valid),this.deviceForm.valid){let e=this.deviceForm.value;e.id=this.id,this.adminService.updateCountry(e).subscribe(t=>{this.notification.success("SUCCESS","Country Updated Successfully.",{nzDuration:5e3}),this.router.navigateByUrl("/admin/view-locations")},t=>{this.notification.error("ERROR",`${t.error}`,{nzDuration:5e3})})}else for(let e in this.deviceForm.controls)this.deviceForm.controls[e].markAsDirty(),this.deviceForm.controls[e].updateValueAndValidity()}};i.\u0275fac=function(t){return new(t||i)(p(D),p(B),p(S),p(H),p(Z))},i.\u0275cmp=C({type:i,selectors:[["app-update-country"]],standalone:!0,features:[y],decls:14,vars:4,consts:[[1,"bg"],[1,"parent"],[1,"child"],[2,"padding","10px"],["nzType","success",3,"nzMessage",4,"ngIf"],["nz-form","",1,"login-form",3,"ngSubmit","formGroup"],[3,"nzNoColon"],["nzErrorTip","This input is required!"],["type","text","nz-input","","formControlName","name","placeholder","Name"],[2,"padding-bottom","30px"],["nz-button","",1,"login-form-button","login-form-margin",3,"nzType"],["nzType","success",3,"nzMessage"]],template:function(t,a){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),h(4,Bt,1,1,"nz-alert",4),r(),n(5,"form",5),z("ngSubmit",function(){return a.submitForm()}),n(6,"nz-form-label",6),c(7,"Country Name"),r(),n(8,"nz-form-item")(9,"nz-form-control",7),d(10,"input",8),r()(),n(11,"div",9)(12,"button",10),c(13,"Submit"),r()()()()()()),t&2&&(s(4),l("ngIf",a.alertMessage),s(),l("formGroup",a.deviceForm),s(),l("nzNoColon","true"),s(6),l("nzType","primary"))},dependencies:[j,Y,P,M,O,R,A,L,V,J,k,w,x,q,I,F,b,N,_,E,T],styles:[".child[_ngcontent-%COMP%]{padding:50px;width:60%;margin:auto;background-color:#fff;box-shadow:1px 1px 15px -7px #0000001a;border-radius:5px}nz-form-control[_ngcontent-%COMP%]{min-width:280px}.login-form-button[_ngcontent-%COMP%]{width:30%;float:right;margin-top:20px;margin-bottom:20px}button[_ngcontent-%COMP%]{background-color:#001529;border:none}nz-divider[_ngcontent-%COMP%]{padding-bottom:10px}.preview[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}"]});let o=i;return o})();function Gt(o,i){if(o&1&&d(0,"nz-alert",11),o&2){let m=f();l("nzMessage",m.alertMessage)}}var ut=(()=>{let i=class i{constructor(e,t,a,u,g){this.fb=e,this.devicesService=t,this.notification=a,this.router=u,this.activatedRoute=g,this.alertMessage=null}ngOnInit(){this.deviceForm=this.fb.group({name:[null,[v.required]]}),this.id=this.activatedRoute.snapshot.params.id,this.getCityById()}getCityById(){this.devicesService.getCity(this.id).subscribe(e=>{this.deviceForm.patchValue(e)},e=>{this.notification.error("ERROR",`${e.error}`,{nzDuration:5e3})})}submitForm(){if(console.log(this.deviceForm.valid),this.deviceForm.valid){let e=this.deviceForm.value;e.id=this.id,this.devicesService.updateCity(e).subscribe(t=>{this.notification.success("SUCCESS","City Updated Successfully.",{nzDuration:5e3}),this.router.navigateByUrl("/admin/view-locations")},t=>{this.notification.error("ERROR",`${t.error}`,{nzDuration:5e3})})}else for(let e in this.deviceForm.controls)this.deviceForm.controls[e].markAsDirty(),this.deviceForm.controls[e].updateValueAndValidity()}};i.\u0275fac=function(t){return new(t||i)(p(D),p(B),p(S),p(H),p(Z))},i.\u0275cmp=C({type:i,selectors:[["app-update-city"]],standalone:!0,features:[y],decls:14,vars:4,consts:[[1,"bg"],[1,"parent"],[1,"child"],[2,"padding","10px"],["nzType","success",3,"nzMessage",4,"ngIf"],["nz-form","",1,"login-form",3,"ngSubmit","formGroup"],[3,"nzNoColon"],["nzErrorTip","This input is required!"],["type","text","nz-input","","formControlName","name","placeholder","Name"],[2,"padding-bottom","30px"],["nz-button","",1,"login-form-button","login-form-margin",3,"nzType"],["nzType","success",3,"nzMessage"]],template:function(t,a){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),h(4,Gt,1,1,"nz-alert",4),r(),n(5,"form",5),z("ngSubmit",function(){return a.submitForm()}),n(6,"nz-form-label",6),c(7,"City Name"),r(),n(8,"nz-form-item")(9,"nz-form-control",7),d(10,"input",8),r()(),n(11,"div",9)(12,"button",10),c(13,"Submit"),r()()()()()()),t&2&&(s(4),l("ngIf",a.alertMessage),s(),l("formGroup",a.deviceForm),s(),l("nzNoColon","true"),s(6),l("nzType","primary"))},dependencies:[j,Y,P,M,O,R,A,L,V,J,k,w,x,q,I,F,b,N,_,E,T],styles:[".child[_ngcontent-%COMP%]{padding:50px;width:60%;margin:auto;background-color:#fff;box-shadow:1px 1px 15px -7px #0000001a;border-radius:5px}nz-form-control[_ngcontent-%COMP%]{min-width:280px}.login-form-button[_ngcontent-%COMP%]{width:30%;float:right;margin-top:20px;margin-bottom:20px}button[_ngcontent-%COMP%]{background-color:#001529;border:none}nz-divider[_ngcontent-%COMP%]{padding-bottom:10px}.preview[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}"]});let o=i;return o})();var Ut=[{path:"dashboard",component:rt,canActivate:[X]},{path:"view-locations",component:at,canActivate:[X]},{path:"create-country",component:mt,canActivate:[X]},{path:"create-city/:id",component:st,canActivate:[X]},{path:"create-company",component:lt,canActivate:[X]},{path:"view-companies",component:ct,canActivate:[X]},{path:"create-internal-company",component:pt,canActivate:[X]},{path:"update-country/:id",component:dt,canActivate:[X]},{path:"update-city/:id",component:ut,canActivate:[X]}],ft=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=ye({type:i}),i.\u0275inj=Ce({imports:[He.forChild(Ut),He]});let o=i;return o})();var Ki=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=ye({type:i}),i.\u0275inj=Ce({imports:[x,ft]});let o=i;return o})();export{Ki as AdminModule};
